<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è®°å¿†å¡ç‰‡æ¸¸æˆ</title>
    <!-- å¼•å…¥Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- é…ç½®Tailwindè‡ªå®šä¹‰é¢œè‰²å’Œå­—ä½“ -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4F46E5',
                        secondary: '#EC4899',
                        accent: '#10B981',
                    },
                }
            }
        }
    </script>
    
    <!-- è‡ªå®šä¹‰æ ·å¼ -->
    <style>
        .card {
            width: 100%;
            height: 100%;
            position: relative;
            cursor: pointer;
            perspective: 1000px;
        }
        
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        
        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }
        
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .card-back {
            background-color: #4F46E5;
            color: white;
            font-size: clamp(1.5rem, 5vw, 2rem);
        }
        
        .card-front {
            background-color: white;
            color: #EC4899;
            font-size: clamp(1.8rem, 6vw, 2.5rem);
            transform: rotateY(180deg);
        }
        
        /* å»¶é•¿å¡ç‰‡æ¶ˆå¤±åŠ¨ç”»æ—¶é—´è‡³1ç§’ï¼Œä½¿å…¶æ›´å¹³æ»‘ */
        .card.matched {
            opacity: 0;
            transform: scale(0) rotateY(180deg);
            pointer-events: none;
            transition: all 1s cubic-bezier(0.16, 1, 0.3, 1);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-indigo-50 to-purple-50 min-h-screen p-4 font-sans flex flex-col">
    <div class="container mx-auto max-w-7xl flex-grow">
        <!-- æ¸¸æˆæ ‡é¢˜ -->
        <header class="text-center mb-6">
            <h1 class="text-[clamp(1.8rem,6vw,2.5rem)] font-bold text-primary mb-2">è®°å¿†å¡ç‰‡</h1>
            <p class="text-gray-600">ç¿»è½¬å¡ç‰‡ï¼Œæ‰¾åˆ°æ‰€æœ‰é…å¯¹ï¼</p>
        </header>
        
        <!-- æ¸¸æˆçŠ¶æ€é¢æ¿ -->
        <div class="bg-white rounded-xl shadow-lg p-3 md:p-5 mb-6 grid grid-cols-3 gap-2">
            <div class="text-center">
                <p class="text-gray-500 text-sm">æ­¥æ•°</p>
                <p id="moves" class="text-xl font-bold text-primary">0</p>
            </div>
            <div class="text-center">
                <p class="text-gray-500 text-sm">ç”¨æ—¶</p>
                <p id="timer" class="text-xl font-bold text-primary">00:00</p>
            </div>
            <div class="text-center">
                <p class="text-gray-500 text-sm">å·²åŒ¹é…</p>
                <p id="matches" class="text-xl font-bold text-accent">0/0</p>
            </div>
        </div>
        
        <!-- æ§åˆ¶æŒ‰é’® -->
        <div class="flex flex-wrap justify-center gap-3 mb-6">
            <div class="relative">
                <label for="difficulty" class="block text-xs font-medium text-gray-700 mb-1">éš¾åº¦</label>
                <select id="difficulty" class="bg-white border border-gray-300 text-gray-700 py-2 px-3 pr-6 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary">
                    <option value="easy">ç®€å• (4Ã—4)</option>
                    <option value="medium" selected>ä¸­ç­‰ (6Ã—6)</option>
                    <option value="hard">å›°éš¾ (8Ã—8)</option>
                    <option value="very-hard">æéš¾ (10Ã—10)</option>
                </select>
            </div>
            <div class="pt-4">
                <button id="restart-btn" class="bg-primary hover:bg-primary/90 text-white font-medium py-2 px-4 rounded-lg transition-all duration-300 transform hover:scale-105 flex items-center text-sm">
                    <span class="mr-1">ğŸ”„</span> é‡ç©
                </button>
            </div>
        </div>
        
        <!-- æ¸¸æˆå¡ç‰‡ç½‘æ ¼ -->
        <div id="game-board" class="grid grid-cols-6 sm:grid-cols-6 md:grid-cols-8 gap-2 sm:gap-3 mb-8">
            <!-- å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
        </div>
        
        <!-- æ¸¸æˆç»“æŸå¼¹çª— -->
        <div id="game-over-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-2xl shadow-2xl p-6 max-w-md w-full mx-4 transform transition-all duration-300 scale-95 opacity-0" id="modal-content">
                <div class="text-center">
                    <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-accent/20 text-accent mb-4">
                        <span class="text-3xl">ğŸ†</span>
                    </div>
                    <h2 class="text-xl font-bold mb-2">æ­å–œä½ ï¼</h2>
                    <p class="text-gray-600 mb-4">ä½ å·²å®Œæˆæ‰€æœ‰é…å¯¹</p>
                    
                    <div class="bg-gray-50 rounded-lg p-3 mb-4">
                        <div class="flex justify-between mb-2">
                            <span class="text-gray-600">æ€»æ­¥æ•°ï¼š</span>
                            <span id="final-moves" class="font-bold">0</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">æ€»ç”¨æ—¶ï¼š</span>
                            <span id="final-time" class="font-bold">00:00</span>
                        </div>
                    </div>
                    
                    <button id="play-again-btn" class="bg-primary hover:bg-primary/90 text-white font-medium py-2 px-6 rounded-lg transition-all duration-300 w-full">
                        å†ç©ä¸€æ¬¡
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- åº•éƒ¨ä¿¡æ¯ -->
    <footer class="bg-white/80 backdrop-blur-sm border-t border-gray-200 py-4 mt-8">
        <div class="container mx-auto px-4 text-center text-gray-600 text-sm">
            <p> é™ˆçœå®‰åˆ¶ä½œ</p>
            <p>Â© 2025 è®°å¿†å¡ç‰‡æ¸¸æˆ | å½“å‰ç‰ˆæœ¬1.0.0</p>
        </div>
    </footer>

    <script>
        // æ¸¸æˆçŠ¶æ€å˜é‡
        let gameState = {
            cards: [],
            flippedCards: [],
            matchedPairs: 0,
            totalPairs: 0,
            moves: 0,
            isProcessing: false,
            timer: null,
            seconds: 0
        };
        
        // å¡ç‰‡å›¾æ¡ˆï¼Œæ”¯æŒæœ€å¤§éš¾åº¦10Ã—10=100å¼ å¡ç‰‡ï¼ˆ50å¯¹ï¼‰
        const cardEmojis = [
            // æ°´æœç±»
            'ğŸ', 'ğŸ', 'ğŸŠ', 'ğŸ‹', 'ğŸŒ', 'ğŸ‰', 'ğŸ‡', 'ğŸ“',
            'ğŸ’', 'ğŸ¥­', 'ğŸ¥‘', 'ğŸ¥', 'ğŸ…', 'ğŸ¥¥', 'ğŸ‘', 'ğŸ',
            
            // è”¬èœç±»
            'ğŸ¥•', 'ğŸ¥’', 'ğŸ¥¬', 'ğŸ¥¦', 'ğŸ„', 'ğŸ¥”', 'ğŸ§…', 'ğŸ¥‘',
            
            // é£Ÿç‰©ç±»
            'ğŸ', 'ğŸš', 'ğŸ', 'ğŸœ', 'ğŸ•', 'ğŸ”', 'ğŸŸ', 'ğŸŒ­',
            'ğŸ¿', 'ğŸ©', 'ğŸª', 'ğŸ‚', 'ğŸ°', 'ğŸ¨', 'ğŸ¦', 'ğŸ­',
            
            // åŠ¨ç‰©ç±»
            'ğŸ¶', 'ğŸ±', 'ğŸ­', 'ğŸ¹', 'ğŸ°', 'ğŸ¦Š', 'ğŸ»', 'ğŸ¼',
            'ğŸ¨', 'ğŸ¯', 'ğŸ¦', 'ğŸ®', 'ğŸ·', 'ğŸ¸', 'ğŸµ', 'ğŸ”',
            
            // å…¶ä»–ç±»
            'ğŸš—', 'ğŸš•', 'ğŸš™', 'ğŸšŒ', 'âœˆï¸', 'ğŸš€', 'â˜€ï¸', 'ğŸŒ™'
        ];
        
        // DOMå…ƒç´ 
        const gameBoard = document.getElementById('game-board');
        const movesDisplay = document.getElementById('moves');
        const timerDisplay = document.getElementById('timer');
        const matchesDisplay = document.getElementById('matches');
        const restartBtn = document.getElementById('restart-btn');
        const difficultySelect = document.getElementById('difficulty');
        const gameOverModal = document.getElementById('game-over-modal');
        const modalContent = document.getElementById('modal-content');
        const finalMovesDisplay = document.getElementById('final-moves');
        const finalTimeDisplay = document.getElementById('final-time');
        const playAgainBtn = document.getElementById('play-again-btn');
        
        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            // æ ¹æ®éš¾åº¦è®¾ç½®å¡ç‰‡æ•°é‡å’Œç½‘æ ¼
            let gridSize, cardCount;
            switch(difficultySelect.value) {
                case 'easy':
                    gridSize = 'grid-cols-4 sm:grid-cols-4 md:grid-cols-4';
                    cardCount = 16; // 4Ã—4=16å¼ å¡ç‰‡ï¼Œ8å¯¹
                    break;
                case 'hard':
                    gridSize = 'grid-cols-8 sm:grid-cols-8 md:grid-cols-8';
                    cardCount = 64; // 8Ã—8=64å¼ å¡ç‰‡ï¼Œ32å¯¹
                    break;
                case 'very-hard':
                    gridSize = 'grid-cols-10 sm:grid-cols-10 md:grid-cols-10';
                    cardCount = 100; // 10Ã—10=100å¼ å¡ç‰‡ï¼Œ50å¯¹
                    break;
                case 'medium':
                default:
                    gridSize = 'grid-cols-6 sm:grid-cols-6 md:grid-cols-6';
                    cardCount = 36; // 6Ã—6=36å¼ å¡ç‰‡ï¼Œ18å¯¹
                    break;
            }
            
            // è®¾ç½®æ¸¸æˆæ¿ç½‘æ ¼
            gameBoard.className = `grid ${gridSize} gap-2 sm:gap-3 mb-8`;
            
            // é‡ç½®æ¸¸æˆçŠ¶æ€
            resetGameState();
            
            // ç”Ÿæˆå¡ç‰‡
            generateCards(cardCount);
            
            // æ›´æ–°æ˜¾ç¤º
            updateDisplay();
        }
        
        // é‡ç½®æ¸¸æˆçŠ¶æ€
        function resetGameState() {
            gameState.cards = [];
            gameState.flippedCards = [];
            gameState.matchedPairs = 0;
            gameState.moves = 0;
            gameState.isProcessing = false;
            
            // åœæ­¢è®¡æ—¶å™¨å¹¶é‡ç½®
            if (gameState.timer) {
                clearInterval(gameState.timer);
                gameState.timer = null;
            }
            gameState.seconds = 0;
            
            // æ¸…ç©ºæ¸¸æˆæ¿
            gameBoard.innerHTML = '';
        }
        
        // ç”Ÿæˆå¡ç‰‡
        function generateCards(cardCount) {
            // ç¡®ä¿å¡ç‰‡æ•°é‡æ˜¯å¶æ•°
            if (cardCount % 2 !== 0) cardCount++;
            
            gameState.totalPairs = cardCount / 2;
            
            // æ£€æŸ¥æ˜¯å¦æœ‰è¶³å¤Ÿçš„å›¾æ¡ˆï¼Œå¦‚æœä¸å¤Ÿåˆ™å¤åˆ¶è¡¥å……
            let availableEmojis = [...cardEmojis];
            while (availableEmojis.length < gameState.totalPairs) {
                availableEmojis = [...availableEmojis, ...cardEmojis];
            }
            
            // éšæœºé€‰æ‹©emojiå¹¶åˆ›å»ºæˆå¯¹çš„å¡ç‰‡
            const selectedEmojis = availableEmojis
                .sort(() => 0.5 - Math.random())
                .slice(0, gameState.totalPairs);
                
            // åˆ›å»ºæˆå¯¹çš„å¡ç‰‡
            const cardPairs = [];
            selectedEmojis.forEach(emoji => {
                cardPairs.push({ emoji, matched: false });
                cardPairs.push({ emoji, matched: false });
            });
            
            // éšæœºæ’åºå¡ç‰‡
            gameState.cards = cardPairs.sort(() => 0.5 - Math.random());
            
            // åˆ›å»ºå¡ç‰‡å…ƒç´ 
            gameState.cards.forEach((card, index) => {
                const cardElement = createCardElement(index, card.emoji);
                gameBoard.appendChild(cardElement);
            });
        }
        
        // åˆ›å»ºå¡ç‰‡å…ƒç´ 
        function createCardElement(index, emoji) {
            // åˆ›å»ºå¡ç‰‡å®¹å™¨
            const cardContainer = document.createElement('div');
            cardContainer.className = 'aspect-square transition-all duration-300'; // ç¡®ä¿å¡ç‰‡æ˜¯æ­£æ–¹å½¢
            
            // åˆ›å»ºå¡ç‰‡
            const card = document.createElement('div');
            card.className = 'card h-full';
            card.dataset.index = index;
            
            // å¡ç‰‡å†…éƒ¨ç¿»è½¬å®¹å™¨
            const cardInner = document.createElement('div');
            cardInner.className = 'card-inner';
            
            // å¡ç‰‡èƒŒé¢ï¼ˆé—®å·ï¼‰
            const cardBack = document.createElement('div');
            cardBack.className = 'card-back';
            cardBack.textContent = '?';
            
            // å¡ç‰‡æ­£é¢ï¼ˆemojiï¼‰
            const cardFront = document.createElement('div');
            cardFront.className = 'card-front';
            cardFront.textContent = emoji;
            
            // ç»„è£…å¡ç‰‡
            cardInner.appendChild(cardFront);
            cardInner.appendChild(cardBack);
            card.appendChild(cardInner);
            cardContainer.appendChild(card);
            
            // æ·»åŠ ç‚¹å‡»äº‹ä»¶
            card.addEventListener('click', () => flipCard(index));
            
            return cardContainer;
        }
        
        // ç¿»è½¬å¡ç‰‡
        function flipCard(index) {
            // éªŒè¯æ¡ä»¶
            if (gameState.isProcessing || 
                gameState.cards[index].matched || 
                gameState.flippedCards.includes(index)) {
                return;
            }
            
            // å¼€å§‹è®¡æ—¶å™¨
            if (!gameState.timer) {
                startTimer();
            }
            
            // ç¿»è½¬å¡ç‰‡
            const cardElement = document.querySelector(`.card[data-index="${index}"]`);
            cardElement.classList.add('flipped');
            
            // è®°å½•ç¿»è½¬çš„å¡ç‰‡
            gameState.flippedCards.push(index);
            
            // æ£€æŸ¥åŒ¹é…
            if (gameState.flippedCards.length === 2) {
                gameState.moves++;
                updateDisplay();
                checkForMatch();
            }
        }
        
        // æ£€æŸ¥åŒ¹é…
        function checkForMatch() {
            gameState.isProcessing = true;
            
            const [index1, index2] = gameState.flippedCards;
            const card1 = gameState.cards[index1];
            const card2 = gameState.cards[index2];
            
            if (card1.emoji === card2.emoji) {
                // åŒ¹é…æˆåŠŸ - å¡ç‰‡æ¶ˆå¤±æ•ˆæœ
                card1.matched = true;
                card2.matched = true;
                gameState.matchedPairs++;
                
                // æ·»åŠ åŒ¹é…æ ·å¼ - å¡ç‰‡æ¶ˆå¤±ï¼ˆåŠ¨ç”»æ—¶é—´å·²å»¶é•¿ï¼‰
                setTimeout(() => {
                    const cardElement1 = document.querySelector(`.card[data-index="${index1}"]`);
                    const cardElement2 = document.querySelector(`.card[data-index="${index2}"]`);
                    cardElement1.classList.add('matched');
                    cardElement2.classList.add('matched');
                    
                    gameState.flippedCards = [];
                    gameState.isProcessing = false;
                    
                    updateDisplay();
                    
                    // æ£€æŸ¥æ¸¸æˆç»“æŸ
                    if (gameState.matchedPairs === gameState.totalPairs) {
                        endGame();
                    }
                }, 500);
            } else {
                // åŒ¹é…å¤±è´¥ï¼Œç¿»å›å¡ç‰‡
                setTimeout(() => {
                    const cardElement1 = document.querySelector(`.card[data-index="${index1}"]`);
                    const cardElement2 = document.querySelector(`.card[data-index="${index2}"]`);
                    cardElement1.classList.remove('flipped');
                    cardElement2.classList.remove('flipped');
                    
                    gameState.flippedCards = [];
                    gameState.isProcessing = false;
                }, 1000);
            }
        }
        
        // è®¡æ—¶å™¨åŠŸèƒ½
        function startTimer() {
            gameState.timer = setInterval(() => {
                gameState.seconds++;
                updateTimerDisplay();
            }, 1000);
        }
        
        function updateTimerDisplay() {
            const minutes = Math.floor(gameState.seconds / 60);
            const seconds = gameState.seconds % 60;
            timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        // æ›´æ–°æ˜¾ç¤º
        function updateDisplay() {
            movesDisplay.textContent = gameState.moves;
            matchesDisplay.textContent = `${gameState.matchedPairs}/${gameState.totalPairs}`;
            updateTimerDisplay();
        }
        
        // æ¸¸æˆç»“æŸ
        function endGame() {
            clearInterval(gameState.timer);
            
            finalMovesDisplay.textContent = gameState.moves;
            const minutes = Math.floor(gameState.seconds / 60);
            const seconds = gameState.seconds % 60;
            finalTimeDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            setTimeout(() => {
                gameOverModal.classList.remove('hidden');
                setTimeout(() => {
                    modalContent.classList.remove('scale-95', 'opacity-0');
                    modalContent.classList.add('scale-100', 'opacity-100');
                }, 10);
            }, 500);
        }
        
        // äº‹ä»¶ç›‘å¬
        restartBtn.addEventListener('click', initGame);
        difficultySelect.addEventListener('change', initGame);
        playAgainBtn.addEventListener('click', () => {
            modalContent.classList.remove('scale-100', 'opacity-100');
            modalContent.classList.add('scale-95', 'opacity-0');
            
            setTimeout(() => {
                gameOverModal.classList.add('hidden');
                initGame();
            }, 300);
        });
        
        // åˆå§‹åŒ–æ¸¸æˆ
        document.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>
    